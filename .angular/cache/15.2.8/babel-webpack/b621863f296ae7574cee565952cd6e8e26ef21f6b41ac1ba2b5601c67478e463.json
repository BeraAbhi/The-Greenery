{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../services/httpRequest.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../loading-spinner/loading-spinner.component\";\nfunction CartComponent_app_loading_spinner_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loading-spinner\");\n  }\n}\nfunction CartComponent_tr_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 27)(1, \"td\", 28)(2, \"div\", 29);\n    i0.ɵɵelement(3, \"img\", 30);\n    i0.ɵɵelementStart(4, \"div\", 31)(5, \"a\", 32);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(7, \"td\", 33, 34);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\", 35)(11, \"img\", 36);\n    i0.ɵɵlistener(\"click\", function CartComponent_tr_24_Template_img_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onMinus(item_r2.productName));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 37, 38);\n    i0.ɵɵelementStart(14, \"img\", 39);\n    i0.ɵɵlistener(\"click\", function CartComponent_tr_24_Template_img_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.onPlus(item_r2.productName));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"td\", 33);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\", 40);\n    i0.ɵɵlistener(\"click\", function CartComponent_tr_24_Template_td_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.onCartDeleteProduct(item_r2.id));\n    });\n    i0.ɵɵelementStart(18, \"a\", 41);\n    i0.ɵɵelement(19, \"img\", 42);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", item_r2.productImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r2.productName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r2.productPrice);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"value\", item_r2.productQuantity);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", item_r2.productQuantity * item_r2.productPrice, \" \");\n  }\n}\nexport class CartComponent {\n  constructor(http, httpRequest, router, cdf) {\n    this.http = http;\n    this.httpRequest = httpRequest;\n    this.router = router;\n    this.cdf = cdf;\n    this.productQuantityTotal = [];\n  }\n  ngOnInit() {\n    this.getCartData();\n    this.loadingSpinner = true;\n  }\n  getCartData() {\n    debugger;\n    this.localUserType = JSON.parse(localStorage.getItem('loginData') || '');\n    this.httpRequest.getDataFromCart().subscribe(data => {\n      this.apiData = data;\n      let userCart = data.filter(data => data.userName === this.localUserType.firstName);\n      this.apiDataToDisplay = userCart;\n      this.loadingSpinner = false;\n      this.onTotalPrice();\n      this.onTotalQuantity();\n    });\n  }\n  onTotalQuantity() {\n    this.productQuantityTotal = this.apiDataToDisplay.reduce(function (acc, obj) {\n      return acc + obj.productQuantity;\n    }, 0);\n  }\n  onTotalPrice() {\n    this.totalPrice = this.apiDataToDisplay.reduce(function (acc, obj) {\n      let xyz = obj.productQuantity;\n      let ABC = xyz * obj.productPrice;\n      return acc + ABC;\n    }, 0);\n  }\n  onPlus(nameOfProduct) {\n    debugger;\n    let index = this.apiData.findIndex(abcd => abcd.productName === nameOfProduct && abcd.userName === this.localUserType.firstName);\n    this.apiData[index].productQuantity = this.apiData[index].productQuantity + 1;\n    this.loadingSpinner = true;\n    setTimeout(() => {\n      this.httpRequest.updateCartData(this.apiData[index].id, this.apiData[index]).subscribe();\n    }, 200);\n    setTimeout(() => {\n      this.getCartData();\n    }, 500);\n    this.cdf.detectChanges();\n  }\n  onMinus(nameOfProduct) {\n    debugger;\n    let index = this.apiData.findIndex(abcd => abcd.productName === nameOfProduct && abcd.userName === this.localUserType.firstName);\n    if (this.apiData[index].productQuantity === 1) {\n      this.apiData[index].productQuantity = 1;\n    } else {\n      this.loadingSpinner = true;\n      this.apiData[index].productQuantity = this.apiData[index].productQuantity - 1;\n    }\n    setTimeout(() => {\n      this.httpRequest.updateCartData(this.apiData[index].id, this.apiData[index]).subscribe();\n    }, 200);\n    setTimeout(() => {\n      this.getCartData();\n    }, 500);\n    // this.cdf.detectChanges();\n  }\n\n  onPlaceOrder() {\n    localStorage.setItem(\"order-item\", JSON.stringify(this.apiDataToDisplay));\n  }\n  onCartDeleteProduct(index) {\n    debugger;\n    this.httpRequest.deleteCartProduct(index).subscribe(res => {\n      this.loadingSpinner = true;\n    });\n    setTimeout(() => {\n      this.getCartData();\n    }, 2000);\n  }\n}\nCartComponent.ɵfac = function CartComponent_Factory(t) {\n  return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.httpRequest), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\nCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CartComponent,\n  selectors: [[\"app-cart\"]],\n  decls: 60,\n  vars: 6,\n  consts: [[1, \"container\", \"px-3\", \"my-5\", \"clearfix\"], [1, \"card\"], [1, \"card-header\"], [4, \"ngIf\"], [1, \"card-body\"], [1, \"table-responsive\"], [1, \"table\", \"table-bordered\", \"m-0\"], [1, \"text-center\", \"py-3\", \"px-4\", 2, \"min-width\", \"400px\"], [1, \"text-right\", \"py-3\", \"px-4\", 2, \"width\", \"100px\"], [1, \"text-center\", \"py-3\", \"px-4\", 2, \"width\", \"120px\"], [1, \"text-center\", \"align-middle\", \"py-3\", \"px-0\", 2, \"width\", \"40px\"], [\"title\", \"\", \"data-original-title\", \"Clear cart\", 1, \"shop-tooltip\", \"float-none\", \"text-light\"], [1, \"ino\", \"ion-md-trash\"], [\"class\", \"cartdata\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-right\", \"total\"], [1, \"text-muted\", \"font-weight-normal\", \"mr-5\"], [1, \"text-large\"], [1, \"text-muted\", \"font-weight-normal\", \"m-\"], [1, \"col-md-4\", \"col-sm-12\"], [1, \"cart_totals\"], [1, \"total-div\"], [1, \"cart-subtotal\"], [1, \"order-total\"], [1, \"amount\"], [1, \"wc-proceed-to-checkout\"], [\"href\", \"checkout.html\"], [1, \"btn\", \"btn-success\", \"place-order\", 3, \"click\"], [1, \"cartdata\"], [1, \"p-4\"], [1, \"media\", \"align-items-center\"], [\"alt\", \"\", 1, \"d-block\", \"ui-w-40\", \"ui-bordered\", \"mr-4\", 3, \"src\"], [1, \"media-body\"], [\"href\", \"#\", 1, \"d-block\", \"nameofproduct\"], [1, \"text-right\", \"font-weight-semibold\", \"align-middle\", \"p-4\"], [\"abcd\", \"\"], [1, \"align-middle\", \"product-quantity\", \"p-4\"], [\"src\", \"https://cdn1.iconfinder.com/data/icons/ecommerce-solid-5/32/quantity_1-512.png\", \"alt\", \"\", 1, \"plus-minus\", 3, \"click\"], [\"type\", \"number\", \"min\", \"0\", \"disabled\", \"\", 1, \"form-control\", \"text-center\", 3, \"value\"], [\"inputData\", \"\"], [\"src\", \"https://cdn1.iconfinder.com/data/icons/ecommerce-solid-5/32/quantity-64.png\", \"alt\", \"\", 1, \"plus-minus\", 3, \"click\"], [1, \"text-center\", \"align-middle\", \"px-0\", 3, \"click\"], [\"title\", \"\", \"data-original-title\", \"Remove\", 1, \"shop-tooltip\", \"close\", \"float-none\", \"text-danger\", \"delete\"], [\"src\", \"https://cdn-icons-png.flaticon.com/512/8848/8848798.png\", \"alt\", \"\", \"height\", \"38px\", \"width\", \"38px\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"body\")(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"h2\");\n      i0.ɵɵtext(5, \"Shopping Cart\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, CartComponent_app_loading_spinner_6_Template, 1, 0, \"app-loading-spinner\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 4)(8, \"div\", 5)(9, \"table\", 6)(10, \"thead\")(11, \"tr\")(12, \"th\", 7);\n      i0.ɵɵtext(13, \"Product Name & Details\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"th\", 8);\n      i0.ɵɵtext(15, \"Price\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"th\", 9);\n      i0.ɵɵtext(17, \"Quantity\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"th\", 8);\n      i0.ɵɵtext(19, \"Total\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"th\", 10)(21, \"a\", 11);\n      i0.ɵɵelement(22, \"i\", 12);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(23, \"tbody\");\n      i0.ɵɵtemplate(24, CartComponent_tr_24_Template, 20, 5, \"tr\", 13);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(25, \"div\", 14)(26, \"label\", 15);\n      i0.ɵɵtext(27, \"Total Quantity \");\n      i0.ɵɵelementStart(28, \"div\", 16)(29, \"strong\");\n      i0.ɵɵtext(30);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(31, \"label\", 17);\n      i0.ɵɵtext(32, \"Total Price \");\n      i0.ɵɵelementStart(33, \"div\", 16)(34, \"strong\");\n      i0.ɵɵtext(35);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(36, \"div\", 18)(37, \"div\", 19)(38, \"h2\");\n      i0.ɵɵtext(39, \"Cart Totals\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"table\")(41, \"tbody\", 20)(42, \"tr\", 21)(43, \"th\");\n      i0.ɵɵtext(44, \"Total Quanity\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(45, \"th\");\n      i0.ɵɵtext(46, \"Total\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(47, \"tr\", 22)(48, \"td\")(49, \"span\", 23);\n      i0.ɵɵtext(50);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(51, \"td\")(52, \"strong\")(53, \"span\", 23);\n      i0.ɵɵtext(54);\n      i0.ɵɵelementEnd()()()()()();\n      i0.ɵɵelementStart(55, \"div\", 24)(56, \"a\", 25);\n      i0.ɵɵtext(57, \"Proceed to Checkout\");\n      i0.ɵɵelementEnd()()()()()();\n      i0.ɵɵelementStart(58, \"button\", 26);\n      i0.ɵɵlistener(\"click\", function CartComponent_Template_button_click_58_listener() {\n        return ctx.onPlaceOrder();\n      });\n      i0.ɵɵtext(59, \"place order\");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.loadingSpinner);\n      i0.ɵɵadvance(18);\n      i0.ɵɵproperty(\"ngForOf\", ctx.apiDataToDisplay);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(ctx.productQuantityTotal);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\"\\u20B9\", ctx.totalPrice, \"\");\n      i0.ɵɵadvance(15);\n      i0.ɵɵtextInterpolate(ctx.productQuantityTotal);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\"\\u20B9\", ctx.totalPrice, \"\");\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.LoadingSpinnerComponent],\n  styles: [\".ui-w-40[_ngcontent-%COMP%] {\\r\\n    width: 40px !important;\\r\\n    height: auto;\\r\\n\\r\\n}\\r\\nbody[_ngcontent-%COMP%]{\\r\\n    width: 100vw;\\r\\n    background-color:#FFFFDD;\\r\\n    height: 100vh;\\r\\n    padding-top: 10px;\\r\\n    display: flex;\\r\\n    align-items: center;\\r\\n    justify-content: center;\\r\\n}\\r\\n.card[_ngcontent-%COMP%]{\\r\\n    \\r\\n    box-shadow: 0px 0px 44px 0px gray;\\r\\n\\r\\n}\\r\\n.card[_ngcontent-%COMP%]   .place-order[_ngcontent-%COMP%]{\\r\\n    width: 200px;\\r\\n    height: 50px;\\r\\n    margin-left: 450px;\\r\\n    margin-bottom: 15px;\\r\\n}\\r\\n\\r\\n.ui-product-color[_ngcontent-%COMP%] {\\r\\n    display: inline-block;\\r\\n    overflow: hidden;\\r\\n    margin: .144em;\\r\\n    width: .875rem;\\r\\n    height: .875rem;\\r\\n    border-radius: 10rem;\\r\\n    box-shadow: 0 0 0 1px rgba(0,0,0,0.15) inset;\\r\\n    vertical-align: middle;\\r\\n}\\r\\n.delete[_ngcontent-%COMP%]{\\r\\n cursor: pointer;\\r\\n}\\r\\n.product-quantity[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    align-items: center;\\r\\n    width: 180px;\\r\\n}\\r\\n.align-middle[_ngcontent-%COMP%]   .plus-minus[_ngcontent-%COMP%]{\\r\\n    height: 30px;\\r\\n    width: 30px;\\r\\n    cursor: pointer;\\r\\n}\\r\\ninput[_ngcontent-%COMP%]::-webkit-inner-spin-button{\\r\\n    -webkit-appearance: none;\\r\\n}\\r\\n.total[_ngcontent-%COMP%]{\\r\\n    margin-top: 25px;\\r\\n    display: flex;\\r\\n    justify-content: flex-end;\\r\\n    align-self: center;\\r\\n}\\r\\n.total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{\\r\\n    font-size: 25px;\\r\\n    color: black;\\r\\n    font-weight: 900;\\r\\n    margin-top: 15px;\\r\\n}\\r\\ntr[_ngcontent-%COMP%]{\\r\\n    font-size: 17px;\\r\\n}\\r\\n.cartdata[_ngcontent-%COMP%]{\\r\\n    font-size: 20px;\\r\\n}\\r\\n.nameofproduct[_ngcontent-%COMP%]{\\r\\n    font-size: 30px;\\r\\n    padding-top: 7px;\\r\\n    font-weight: 700;\\r\\n    color: #088178;\\r\\n}\\r\\n\\r\\n.total-div[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    border: 1px solid blue;\\r\\n    justify-content: space-between;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvQHNoYXJlZC9jb21wb25lbnQvY2FydC9jYXJ0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0lBQ0ksc0JBQXNCO0lBQ3RCLFlBQVk7O0FBRWhCO0FBQ0E7SUFDSSxZQUFZO0lBQ1osd0JBQXdCO0lBQ3hCLGFBQWE7SUFDYixpQkFBaUI7SUFDakIsYUFBYTtJQUNiLG1CQUFtQjtJQUNuQix1QkFBdUI7QUFDM0I7QUFDQTtJQUNJLHdEQUF3RDtJQUN4RCxpQ0FBaUM7O0FBRXJDO0FBQ0E7SUFDSSxZQUFZO0lBQ1osWUFBWTtJQUNaLGtCQUFrQjtJQUNsQixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxxQkFBcUI7SUFDckIsZ0JBQWdCO0lBQ2hCLGNBQWM7SUFDZCxjQUFjO0lBQ2QsZUFBZTtJQUNmLG9CQUFvQjtJQUVwQiw0Q0FBNEM7SUFDNUMsc0JBQXNCO0FBQzFCO0FBQ0E7Q0FDQyxlQUFlO0FBQ2hCO0FBQ0E7SUFDSSxhQUFhO0lBQ2IsbUJBQW1CO0lBQ25CLFlBQVk7QUFDaEI7QUFDQTtJQUNJLFlBQVk7SUFDWixXQUFXO0lBQ1gsZUFBZTtBQUNuQjtBQUNBO0lBQ0ksd0JBQXdCO0FBQzVCO0FBQ0E7SUFDSSxnQkFBZ0I7SUFDaEIsYUFBYTtJQUNiLHlCQUF5QjtJQUN6QixrQkFBa0I7QUFDdEI7QUFDQTtJQUNJLGVBQWU7SUFDZixZQUFZO0lBQ1osZ0JBQWdCO0lBQ2hCLGdCQUFnQjtBQUNwQjtBQUNBO0lBQ0ksZUFBZTtBQUNuQjtBQUNBO0lBQ0ksZUFBZTtBQUNuQjtBQUNBO0lBQ0ksZUFBZTtJQUNmLGdCQUFnQjtJQUNoQixnQkFBZ0I7SUFDaEIsY0FBYztBQUNsQjs7QUFFQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsc0JBQXNCO0lBQ3RCLDhCQUE4QjtBQUNsQyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4udWktdy00MCB7XHJcbiAgICB3aWR0aDogNDBweCAhaW1wb3J0YW50O1xyXG4gICAgaGVpZ2h0OiBhdXRvO1xyXG5cclxufVxyXG5ib2R5e1xyXG4gICAgd2lkdGg6IDEwMHZ3O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjojRkZGRkREO1xyXG4gICAgaGVpZ2h0OiAxMDB2aDtcclxuICAgIHBhZGRpbmctdG9wOiAxMHB4O1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxufVxyXG4uY2FyZHtcclxuICAgIC8qIGJveC1zaGFkb3c6IDAgMXB4IDE1cHggMXB4IHJnYmEoNTIsNDAsMTA0LC4wOCk7ICAgICAqL1xyXG4gICAgYm94LXNoYWRvdzogMHB4IDBweCA0NHB4IDBweCBncmF5O1xyXG5cclxufVxyXG4uY2FyZCAucGxhY2Utb3JkZXJ7XHJcbiAgICB3aWR0aDogMjAwcHg7XHJcbiAgICBoZWlnaHQ6IDUwcHg7XHJcbiAgICBtYXJnaW4tbGVmdDogNDUwcHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG59XHJcblxyXG4udWktcHJvZHVjdC1jb2xvciB7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgbWFyZ2luOiAuMTQ0ZW07XHJcbiAgICB3aWR0aDogLjg3NXJlbTtcclxuICAgIGhlaWdodDogLjg3NXJlbTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcmVtO1xyXG4gICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgMCAxcHggcmdiYSgwLDAsMCwwLjE1KSBpbnNldDtcclxuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCByZ2JhKDAsMCwwLDAuMTUpIGluc2V0O1xyXG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxufVxyXG4uZGVsZXRle1xyXG4gY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcbi5wcm9kdWN0LXF1YW50aXR5e1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICB3aWR0aDogMTgwcHg7XHJcbn1cclxuLmFsaWduLW1pZGRsZSAucGx1cy1taW51c3tcclxuICAgIGhlaWdodDogMzBweDtcclxuICAgIHdpZHRoOiAzMHB4O1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcbmlucHV0Ojotd2Via2l0LWlubmVyLXNwaW4tYnV0dG9ue1xyXG4gICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xyXG59XHJcbi50b3RhbHtcclxuICAgIG1hcmdpbi10b3A6IDI1cHg7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcclxuICAgIGFsaWduLXNlbGY6IGNlbnRlcjtcclxufVxyXG4udG90YWwgc3Ryb25ne1xyXG4gICAgZm9udC1zaXplOiAyNXB4O1xyXG4gICAgY29sb3I6IGJsYWNrO1xyXG4gICAgZm9udC13ZWlnaHQ6IDkwMDtcclxuICAgIG1hcmdpbi10b3A6IDE1cHg7XHJcbn1cclxudHJ7XHJcbiAgICBmb250LXNpemU6IDE3cHg7XHJcbn1cclxuLmNhcnRkYXRhe1xyXG4gICAgZm9udC1zaXplOiAyMHB4O1xyXG59XHJcbi5uYW1lb2Zwcm9kdWN0e1xyXG4gICAgZm9udC1zaXplOiAzMHB4O1xyXG4gICAgcGFkZGluZy10b3A6IDdweDtcclxuICAgIGZvbnQtd2VpZ2h0OiA3MDA7XHJcbiAgICBjb2xvcjogIzA4ODE3ODtcclxufVxyXG5cclxuLnRvdGFsLWRpdntcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgYmx1ZTtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","CartComponent","constructor","http","httpRequest","router","cdf","ngOnInit","getCartData","loadingSpinner","localUserType","JSON","parse","localStorage","getItem","getDataFromCart","subscribe","data","apiData","userCart","filter","userName","firstName","apiDataToDisplay","onTotalPrice","onTotalQuantity","productQuantityTotal","reduce","acc","obj","productQuantity","totalPrice","xyz","ABC","productPrice","onPlus","nameOfProduct","index","findIndex","abcd","productName","setTimeout","updateCartData","id","detectChanges","onMinus","onPlaceOrder","setItem","stringify","onCartDeleteProduct","deleteCartProduct","res","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["E:\\intenship angular js\\theGreenery\\src\\app\\@shared\\component\\cart\\cart.component.html","E:\\intenship angular js\\theGreenery\\src\\app\\@shared\\component\\cart\\cart.component.ts"],"sourcesContent":["<body>\n  <div class=\"container px-3 my-5 clearfix\">\n    <!-- Shopping cart table -->\n    <div class=\"card\">\n      <div class=\"card-header\">\n        <h2>Shopping Cart</h2> <app-loading-spinner *ngIf=\"loadingSpinner\"></app-loading-spinner>\n      </div>\n      <div class=\"card-body\">\n        <div class=\"table-responsive\">\n          <table class=\"table table-bordered m-0\">\n            <thead>\n              <tr>\n                <!-- Set columns width -->\n                <th class=\"text-center py-3 px-4\" style=\"min-width: 400px;\">Product Name &amp; Details</th>\n                <th class=\"text-right py-3 px-4\" style=\"width: 100px;\">Price</th>\n                <th class=\"text-center py-3 px-4\" style=\"width: 120px;\">Quantity</th>\n                <th class=\"text-right py-3 px-4\" style=\"width: 100px;\">Total</th>\n                <th class=\"text-center align-middle py-3 px-0\" style=\"width: 40px;\"><a\n                    class=\"shop-tooltip float-none text-light\" title=\"\" data-original-title=\"Clear cart\"><i\n                      class=\"ino ion-md-trash\"></i></a></th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr *ngFor=\"let item of apiDataToDisplay\" class=\"cartdata\">\n                <td class=\"p-4\">\n                  <div class=\"media align-items-center\">\n                    <img [src]=\"item.productImage\" class=\"d-block ui-w-40 ui-bordered mr-4\" alt=\"\">\n                    <div class=\"media-body\">\n                      <a href=\"#\" class=\"d-block nameofproduct\">{{item.productName}}</a>\n                    </div>\n                  </div>\n                </td>\n                <td class=\"text-right font-weight-semibold align-middle p-4\" #abcd>{{item.productPrice}}</td>\n                <td class=\"align-middle product-quantity p-4\"> <img\n                    src=\"https://cdn1.iconfinder.com/data/icons/ecommerce-solid-5/32/quantity_1-512.png\"\n                    class=\"plus-minus\" alt=\"\" (click)=\"onMinus(item.productName)\">\n                  <input type=\"number\" class=\"form-control text-center\" value=\"{{item.productQuantity}}\" #inputData\n                    min=\"0\" disabled>\n                  <img src=\"https://cdn1.iconfinder.com/data/icons/ecommerce-solid-5/32/quantity-64.png\"\n                    class=\"plus-minus\" alt=\"\" (click)=\"onPlus(item.productName)\">\n                </td>\n                <td class=\"text-right font-weight-semibold align-middle p-4\">{{item.productQuantity *\n                  item.productPrice}}\n                </td>\n                <td class=\"text-center align-middle px-0\" (click)=\"onCartDeleteProduct(item.id)\"><a\n                    class=\"shop-tooltip close float-none text-danger delete\" title=\"\" data-original-title=\"Remove\"><img\n                      src=\"https://cdn-icons-png.flaticon.com/512/8848/8848798.png\" alt=\"\" height=\"38px\"\n                      width=\"38px\"></a></td>\n\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        \n        <div class=\"text-right total\">\n          <label class=\"text-muted font-weight-normal mr-5\">Total Quantity\n            <div class=\"text-large\"><strong>{{productQuantityTotal}}</strong></div>\n          </label>\n          <label class=\"text-muted font-weight-normal m-\">Total Price\n            <div class=\"text-large\"><strong>₹{{totalPrice}}</strong></div>\n          </label>\n          <div class=\"col-md-4 col-sm-12 \">\n            <div class=\"cart_totals\">\n              <h2>Cart Totals</h2>\n              <table>\n                <tbody class=\"total-div\">\n                  <tr class=\"cart-subtotal\">\n                    <th>Total Quanity</th>\n                    <th>Total</th>\n                  </tr>\n                  <tr class=\"order-total\">\n                    <td><span class=\"amount\">{{productQuantityTotal}}</span></td>\n                    <td>\n                      <strong><span class=\"amount\">₹{{totalPrice}}</span></strong>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n              <div class=\"wc-proceed-to-checkout\">\n                <a href=\"checkout.html\">Proceed to Checkout</a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <button class=\"btn btn-success place-order\" (click)=\"onPlaceOrder()\">place order</button>\n    </div>\n\n\n    <!-- <div class=\"float-right\">\n      <button type=\"button\" class=\"btn btn-lg btn-default md-btn-flat mt-2 mr-3\" routerLink=\"/dashboard\">Back to\n        shopping</button>\n      <button type=\"button\" class=\"btn btn-lg btn-primary mt-2\">Checkout</button>\n    </div> -->\n\n  </div>\n\n\n</body>","import { HttpClient } from '@angular/common/http';\nimport { ChangeDetectorRef, Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { findIndex } from 'rxjs';\nimport { registraionservice } from 'src/app/@auth/services/auth.service';\nimport { httpRequest } from '../../services/httpRequest.service';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})\nexport class CartComponent implements OnInit {\n  apiData: any;\n  productQuantityTotal: [] = []\n  totalPrice: any;\n  apiDataToDisplay: any;\n  localUserType: any;\n  loadingSpinner!:boolean;\n\n  constructor(private http: HttpClient,\n    private httpRequest: httpRequest,\n    private router: Router,\n    private cdf:ChangeDetectorRef) { }\n\n  ngOnInit(): void {\n    this.getCartData()\n    this.loadingSpinner=true\n  }\n\n  getCartData() {\n    debugger\n    this.localUserType = JSON.parse(localStorage.getItem('loginData') || '')\n    this.httpRequest.getDataFromCart().subscribe((data: any) => {\n      this.apiData = data\n      let userCart = data.filter((data: any) => data.userName === this.localUserType.firstName)\n      this.apiDataToDisplay = userCart\n      this.loadingSpinner=false\n      this.onTotalPrice();\n      this.onTotalQuantity();\n    })\n  }\n\n  onTotalQuantity() {\n    this.productQuantityTotal = this.apiDataToDisplay.reduce(function (acc: any, obj: any) \n    { return acc + obj.productQuantity; }, 0);\n  }\n  onTotalPrice() {\n    this.totalPrice = this.apiDataToDisplay.reduce(function (acc: any, obj: any) {\n      let xyz = obj.productQuantity;\n      let ABC = xyz * obj.productPrice\n      return acc + ABC\n    }, 0);\n  }\n\n  onPlus(nameOfProduct: any) {\n    debugger\n    let index = this.apiData.findIndex((abcd: any) => abcd.productName === nameOfProduct && abcd.userName === this.localUserType.firstName)\n    this.apiData[index].productQuantity = this.apiData[index].productQuantity + 1;\n    this.loadingSpinner=true\n    setTimeout(() => {\n    this.httpRequest.updateCartData(this.apiData[index].id, this.apiData[index]).subscribe()\n      }, 200);\n      setTimeout(() => {\n      this.getCartData();\n      }, 500);\n      this.cdf.detectChanges();\n  }\n\n  onMinus(nameOfProduct: any) {\n    debugger\n    let index = this.apiData.findIndex((abcd: any) => abcd.productName === nameOfProduct && abcd.userName === this.localUserType.firstName)\n    if (this.apiData[index].productQuantity === 1) {\n      this.apiData[index].productQuantity = 1\n    } else {\n      this.loadingSpinner=true\n      this.apiData[index].productQuantity = this.apiData[index].productQuantity - 1;\n    }\n    setTimeout(() => {\n      this.httpRequest.updateCartData(this.apiData[index].id, this.apiData[index]).subscribe()\n      }, 200);\n      setTimeout(() => {\n      this.getCartData();\n      }, 500);\n      // this.cdf.detectChanges();\n  }\n  onPlaceOrder() {\n      localStorage.setItem(\"order-item\",JSON.stringify(this.apiDataToDisplay))\n  } \n\n  onCartDeleteProduct(index: any) {\n    debugger\n    this.httpRequest.deleteCartProduct(index).subscribe((res:any) =>{\n      this.loadingSpinner=true\n    }\n    )\n    setTimeout(() => {\n    this.getCartData();\n    }, 2000);\n  }\n\n}\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}